


/******************************************************************************
* File Name: GPIO.c
* Description: This file contains API definitions for GPIO functionality
* Tool-Chain: AVR GCC
*
* Modification History:25/SEP/2020
* Created by: K.Raviteja V1.0 25/SEP/2020
* Description: V1.0
******************************************************************************/
/******************************************************************************
* Includes
******************************************************************************/
#include "AppMode.h"
/******************************************************************************
* Defines and data types
******************************************************************************/
/******************************************************************************
* Global variables
******************************************************************************/
/******************************************************************************
* Static variables
******************************************************************************/
static int left,right;
static uint16_t ADC_value;
static int t;
/******************************************************************************
* Internal function prototypes
******************************************************************************/
/******************************************************************************
* Public functions definitions
******************************************************************************/
/******************************************************************************
* Name: GPIOConfig (pin, mode)
* Description: Configures the mode of the pin as INPUT/PULLUP or OUTPUT
* Arguments: pin and mode
* Returns: None
******************************************************************************/
int samplingmode() {


    ADCSRA |= (1 << ADSC);
    while (ADCSRA & (1 << ADSC));
    left = (int)ADCL;
    right = (int)ADCH * 256;
    ADC_value = left + right;
    if(ADC_value >= 0 && ADC_value <= 204)
    {
        t=63;
    }
    else if(ADC_value > 204 && ADC_value <= 410)
    {
        t=128;
    }
    else if(ADC_value > 410 && ADC_value <= 614)
    {
        t=191;
    }
    else if(ADC_value >614)
    {
        t = 255;
    }
    return t;

}
/******************************************************************************
* Name: void GPIOPinWrite(int Pin,int state)
* Description: Writes the state of the pin as HIGH or LOW
* Arguments: pin and state
* Returns: None
******************************************************************************/

int standbymode()
{
    t=63;
    return t;
}
/******************************************************************************
* Internal functions
******************************************************************************/
/******************************************************************************
* Name:
* Description:
******************************************************************************/
/******************************************************************************
*******************************************************************************
* End of File
******************************************************************************/
